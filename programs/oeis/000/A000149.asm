; A000149: a(n) = floor(e^n).
; Coded manually by Christian Krause. Based on Horner's method with separate variables for numerator and denominator.
; 1,2,7,20,54,148,403,1096,2980,8103,22026,59874,162754,442413,1202604,3269017,8886110,24154952,65659969,178482300,485165195,1318815734,3584912846,9744803446,26489122129,72004899337,195729609428,532048240601,1446257064291,3931334297144,10686474581524,29048849665247,78962960182680,214643579785916,583461742527454,1586013452313430,4311231547115195,11719142372802611,31855931757113756,86593400423993746,235385266837019985,639843493530054949,1739274941520501047,4727839468229346561,12851600114359308275,34934271057485095348,94961194206024488745,258131288619006739623,701673591209763173865,1907346572495099690525,5184705528587072464087,14093490824269387964492,38310080007165768493035,104137594330290877971834,283075330327469390044206,769478526514201713818274,2091659496012996153907071,5685719999335932222640348,15455389355901039303530766,42012104037905142549565934,114200738981568428366295718,310429793570191990870734214,843835666874145448907332948,2293783159469609879099352840,6235149080811616882909238708,16948892444103337141417836114,46071866343312915426773184428,125236317084221378051352196074,340427604993174052137690718700,925378172558778760024239791668,2515438670919167006265781174252,6837671229762743866755892826677,18586717452841279803403701812545,50523936302761041945570383321857,137338297954017618778418852980853,373324199679900164025490831726470,1014800388113888727832461784131716,2758513454523170206286469819902661,7498416996990120434675630591224060,20382810665126687668323137537172632,55406223843935100525711733958316612,150609731458503054835259413016767498,409399696212745469666091422932782904

mov $2,1  ; denominator
mov $3,$0 ; loop counter
mul $3,5  ; magic number to ensure convergence

lpb $3
  mul $1,$0 ; numerator *= n
  mul $2,$3 ; denominator *= loop counter
  add $1,$2 ; "+1" in Horner's method

  mov $5,$4 ; reduce the size of the numerator and denominator (heuristic)
  max $5,1
  div $1,$5
  div $2,$5

  sub $3,1  ; decrement loop counter
  max $3,1
  add $4,1
lpe

mul $1,$0 ; final multiplication
div $1,$2 ; execute fraction
add $1,1  ; final "+1"
